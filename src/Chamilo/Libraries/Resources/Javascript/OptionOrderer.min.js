function OptionOrderer(b){this.ol=b;var d=OptionOrdererUtilities.getElementMetadata(this.ol);var a=document.getElementsByTagName("input");for(var c=0;c<a.length;c++){if(a[c].name==d.name){this.input=a[c];break}}if(!this.input){alert("failed")}this.loadData();this.updateValue();this.transform()}OptionOrderer.prototype.updateValue=function(){var b;if(this.listItems.length>0){b=this.listItems[0]._oordvalue;for(var a=1;a<this.listItems.length;a++){b+="|"+this.listItems[a]._oordvalue}}else{b=""}this.input.value=b};OptionOrderer.prototype.moveUp=function(b){var a=this.determineIndex(b);this.swap(a,(a>0?a-1:this.listItems.length-1))};OptionOrderer.prototype.moveDown=function(b){var a=this.determineIndex(b);this.swap(a,(a<this.listItems.length-1?a+1:0))};OptionOrderer.prototype.swap=function(d,c){var a=this.listItems[d];this.listItems[d]=this.listItems[c];this.listItems[c]=a;while(this.ol.firstChild){this.ol.removeChild(this.ol.firstChild)}for(var b=0;b<this.listItems.length;b++){this.ol.appendChild(this.listItems[b])}this.updateValue()};OptionOrderer.prototype.determineIndex=function(b){for(var a=0;a<this.listItems.length;a++){if(this.listItems[a]==b){return a}}return -1};OptionOrderer.prototype.loadData=function(){this.listItems=new Array();for(var b=0;b<this.ol.childNodes.length;b++){if(this.ol.childNodes[b].nodeName.toLowerCase()=="li"){this.listItems.push(this.ol.childNodes[b]);var a=OptionOrdererUtilities.getElementMetadata(this.ol.childNodes[b]);this.ol.childNodes[b]._oordvalue=a.value}}};OptionOrderer.prototype.transform=function(){var d=this;for(var c=0;c<this.listItems.length;c++){var a=document.createElement("a");a.className="up-link";a.setAttribute("href","javascript:void(0);");a.onclick=function(){d.moveUp(this.parentNode.parentNode)};a.appendChild(document.createTextNode(String.fromCharCode(8593)));var e=document.createElement("a");e.className="down-link";e.setAttribute("href","javascript:void(0);");e.onclick=function(){d.moveDown(this.parentNode.parentNode)};e.appendChild(document.createTextNode(String.fromCharCode(8595)));var b=document.createElement("span");b.className="ordering-links";b.appendChild(a);b.appendChild(e);this.listItems[c].appendChild(b)}};OptionOrdererUtilities=new Object();OptionOrdererUtilities.initializeOptionOrderers=function(){var b=OptionOrdererUtilities.getElementsByClassName("ol","option-orderer");for(var a=0;a<b.length;a++){new OptionOrderer(b[a])}};OptionOrdererUtilities.getElementMetadata=function(d){var f="oord-";var c=OptionOrdererUtilities.getClassNames(d);var b=new Array();for(var a=0;a<c.length;a++){if(c[a].indexOf(f)==0){var g=c[a].substring(f.length).split(/_/);var e=g[1];for(var a=2;a<g.length;a++){e+="_"+g[a]}b[g[0]]=e}}return b};OptionOrdererUtilities.getClassNames=function(a){return(a&&a.className?a.className.split(/ +/):new Array())};OptionOrdererUtilities.getElementsByClassName=function(d,f){var e=document.getElementsByTagName(d);var c=new Array();for(var b=0;b<e.length;b++){var a=e[b];if(OptionOrdererUtilities.hasClassName(a,f)){c[c.length]=a}}return c};OptionOrdererUtilities.hasClassName=function(a,b){return OptionOrdererUtilities.arrayContains(OptionOrdererUtilities.getClassNames(a),b)};OptionOrdererUtilities.arrayContains=function(b,c){for(var a=0;a<b.length;a++){if(b[a]==c){return true}}return false};OptionOrdererUtilities.addOnloadFunction=function(b){if(window.onload){var a=window.onload;window.onload=function(c){a(c);b()}}else{window.onload=b}};OptionOrdererUtilities.addOnloadFunction(OptionOrdererUtilities.initializeOptionOrderers);