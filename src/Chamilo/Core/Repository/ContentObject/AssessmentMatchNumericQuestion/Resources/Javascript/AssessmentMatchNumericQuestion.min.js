$(function(){var a=0;var c="Chamilo\\Core\\Repository\\ContentObject\\AssessmentMatchTextQuestion\\Ajax";var f=getPath("WEB_PATH")+"index.php";var i="Chamilo\\Core\\Repository\\ContentObject\\AssessmentMatchTextQuestion";function h(){var l,k,j;j=$(".table.table-assessment-question-form > tbody > tr");if(j.size()<=1){$(".option-remove",j).addClass("text-muted");$(".option-remove",j).removeClass("text-danger")}else{$(".option-remove",j).removeClass("text-muted");$(".option-remove",j).addClass("text-danger")}j.each(function(m){var n=$(this);$(".table-cell-selection",n).text((parseInt(m,10)+1)+".")})}function d(n,o){n.preventDefault();var k=confirm(getTranslation("ConfirmOptionDelete",null,i));if(!k){return false}var p=$(this);var l=p.data("option-id");destroyHtmlEditor("feedback["+l+"]");$('.table.table-assessment-question-form tr[data-option-id="'+l+'"]').remove();var m={application:c,go:"SkipOption","option-number":l};var j=$.ajax({type:"POST",url:f,data:m}).success(function(q){if(q.result_code==200){a+=1;h()}})}function g(u,t){u.preventDefault();var p=$("#match_number_of_options").val(),l=(parseInt(p,10)+1),j,v,s,y,k,o,x,n,r,m,w,q;r={width:"100%",height:"65",collapse_toolbar:true};setMemory("match_number_of_options",l);$("#match_number_of_options").val(l);fieldSelection=l+".";y='<textarea class="form-control" style="height: 80px;" name="value['+p+']"></textarea>';fieldFeedback='<div class="option-feedback-field form-assessment-extra-container" data-element="feedback['+p+']">';fieldFeedback+="<label>"+getTranslation("Feedback",null,i)+"</label>";fieldFeedback+=renderHtmlEditor("feedback["+p+"]",r);fieldFeedback+="</div>";o='<div class="option-score-field assessment_match_question_score_container form-inline" data-element="score['+p+']">';o+="<label>"+getTranslation("Score",null,i)+":</label> ";o+='<input size="2" class="input_numeric form-control" name="score['+p+']" value="1" type="text">';o+="</div>";fieldTolerance='<div class="option-tolerance-field form-assessment-extra-container form-inline" data-element="score['+p+']">';fieldTolerance+="<label>"+getTranslation("Tolerance",null,i)+":</label> ";fieldTolerance+='<input size="2" class="input_numeric form-control" name="score['+p+']" value="0" type="text">';fieldTolerance+="</div>";fieldActions='<span data-option-id="'+p+'" class="option-action option-feedback fas fa-comment text-primary"></span>&nbsp;&nbsp;';fieldActions+='<span data-option-id="'+p+'" class="option-action option-tolerance fas fa-magnet text-primary"></span>&nbsp;&nbsp;';fieldActions+='<span data-option-id="'+p+'" class="option-action option-remove fas fa-trash-alt text-danger"></span>';tableRow='<tr data-option-id="'+p+'">';tableRow+='<td class="table-cell-selection cell-stat-x3">'+fieldSelection+"</td>";tableRow+="<td>"+y+o+fieldFeedback+fieldTolerance+"</td>";tableRow+='<td class="table-cell-action cell-stat-x2 text-right">'+fieldActions+"</td>";tableRow+="</tr>";$(".table.table-assessment-question-form > tbody").append(tableRow);h()}function b(k,l){var j=$(this).prop("checked");$('input[name="weight"]').prop("disabled",(j)?true:false)}function e(j,n){var k=j.data("option-id");var m=$('.table.table-assessment-question-form > tbody > tr[data-option-id="'+k+'"]');var l=$("div.option-"+n+"-field",m);if(l.is(":visible")){l.hide()}else{l.show()}}$(document).ready(function(){$(document).on("click",".add-option",g);$(document).on("click",'input[name="recalculate_weight"]',b);$(document).on("click",".table.table-assessment-question-form .option-remove.text-danger",d);$(document).on("click",".table.table-assessment-question-form .option-feedback",function(j,k){e($(this),"feedback")});$(document).on("click",".table.table-assessment-question-form .option-score",function(j,k){e($(this),"score")});$(document).on("click",".table.table-assessment-question-form .option-tolerance",function(j,k){e($(this),"tolerance")})})});