$(function(){$(document).ready(function(){var b=function(){$(this).closest(".right").find(".entity_selector_box").hide();$(".target-entities-container").show()};var e=function(){$(this).closest(".right").find(".entity_selector_box").show();$(".target-entities-container").hide()};var d=function(){$(this).closest(".right").find(".entity_selector_box").hide();$(".target-entities-container").hide()};$(document).on("click",".rights_selector.inherit_rights_selector",b);$(document).on("click",".rights_selector:not(.inherit_rights_selector):not(.specific_rights_selector)",d);$(document).on("click",".rights_selector.specific_rights_selector",e);var a=function(){$(".specific_rights_selector:checked").each(e);$(".inherit_rights_selector:checked").each(b);$(".rights_selector:not(.inherit_rights_selector):not(.specific_rights_selector):checked").each(d)};a();var f=function(g,i){var h=$('<li class="list-group-item"></li>');h.text(g);$(i).append(h)};var c=function(){var g=$(".target-entities-container");var i=g.attr("data-course-id");var h=g.attr("data-tool");var j=$('select[name="category_id"]').val();$.ajax("index.php?application=Chamilo\\Application\\Weblcms\\Ajax&go=GetTargetEntities",{method:"POST",data:{course_id:i,tool_name:h,publication_category_id:j}}).done(function(k){$(".target-entities-user-list > .list-group-item:not(.target-entities-default)").remove();$(".target-entities-course-groups-list > .list-group-item:not(.target-entities-default)").remove();$(".target-entities-platform-groups-list > .list-group-item:not(.target-entities-default)").remove();$(".target-entities-list .target-entities-default").hide();if(k.properties.everyone){$(".target-entities-list .target-entities-everyone").show()}else{if(k.properties.users&&k.properties.users.length>0){$.each(k.properties.users,function(m,l){f(l,".target-entities-user-list")})}else{$(".target-entities-user-list .target-entities-nobody").show()}if(k.properties.course_groups&&k.properties.course_groups.length>0){$.each(k.properties.course_groups,function(l,m){f(m,".target-entities-course-groups-list")})}else{$(".target-entities-course-groups-list .target-entities-nobody").show()}if(k.properties.platform_groups&&k.properties.platform_groups.length>0){$.each(k.properties.platform_groups,function(l,m){f(m,".target-entities-platform-groups-list")})}else{$(".target-entities-platform-groups-list .target-entities-nobody").show()}}})};$('select[name="category_id"]').on("change",c);$("#content_object_publication_form").on("reset",function(){setTimeout(function(){a()})});c()})});