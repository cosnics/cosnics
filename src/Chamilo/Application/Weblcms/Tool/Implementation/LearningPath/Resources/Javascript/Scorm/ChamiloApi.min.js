var API_1484_11=new Object();var API=new Object();API_1484_11.Initialize=ChamiloInitialize;API_1484_11.Terminate=ChamiloTerminate;API_1484_11.GetValue=ChamiloGetValue;API_1484_11.SetValue=ChamiloSetValue;API_1484_11.Commit=ChamiloCommit;API_1484_11.GetLastError=ChamiloGetLastError;API_1484_11.GetErrorString=ChamiloGetErrorString;API_1484_11.GetDiagnostic=ChamiloGetDiagnostic;API_1484_11.values=new Array();API_1484_11.version="1.0";API.LMSInitialize=ChamiloInitialize;API.LMSFinish=ChamiloTerminate;API.LMSGetValue=ChamiloGetValue;API.LMSSetValue=ChamiloSetValue;API.LMSCommit=ChamiloCommit;API.LMSGetLastError=ChamiloGetLastError;API.LMSGetErrorString=ChamiloGetErrorString;API.LMSGetDiagnostic=ChamiloGetDiagnostic;API.values=new Array();API.version="1.0";var last_error=0;var initialized=false;function ChamiloInitialize(a){if(a&&a!=""){last_error=201;return"false"}if(initialized){last_error=103;return"false"}initialized=true;last_error=0;return"true"}function ChamiloTerminate(b){if(b&&b!=""){last_error=201;return"false"}if(!initialized){last_error=301;return"false"}initialized=false;last_error=0;var a=jQuery.ajax({type:"POST",url:"./application/weblcms/tool/learning_path/php/ajax/scorm/terminate.php",data:{tracker_id:tracker_id},async:false}).responseText;check_redirect_conditions(this.values);return"true"}function check_redirect_conditions(b){var d=null;var f=b["adl.nav.request"];if(f==null){return}if(f=="continue"){d=continue_url}if(f=="previous"){d=previous_url}var e=new RegExp("{target=.*}jump");if(f.match(e)){var e=new RegExp("{.*}");var a=e.exec(f);var c=a[0];c=c.substr(8,c.length-9);d=jump_urls[c]}if(d){window.location=d}}function ChamiloGetValue(a){if(!initialized){last_error=122;last_error=301;return""}if(a==""){last_error=301;return""}last_error=0;var b=check_for_special_requests(a);if(b){return b}b=this.values[a];if(!b){b=get_existing_value(a)}if(b==""){last_error=403}return b}function check_for_special_requests(c){if(c=="adl.nav.request_valid.continue"){if(continue_url!=null){return"true"}else{return"false"}}if(c=="adl.nav.request_valid.previous"){if(previous_url!=null){return"true"}else{return"false"}}var d=new RegExp("adl.nav.request_valid.choice.{target=.*}");if(c.match(d)){var d=new RegExp("{.*}");var a=d.exec(c);var b=a[0];b=b.substr(8,b.length-9);if(jump_urls[b]!=null){return"true"}else{return"false"}}}function ChamiloSetValue(b,c){if(!initialized){last_error=132;last_error=301;return"false"}if(b==""){last_error=351;return"false"}if(!validate_set_variable(b,c)){return"false"}this.values[b]=c;last_error=0;var a=jQuery.ajax({type:"POST",url:"./application/weblcms/tool/learning_path/php/ajax/scorm/set_value.php",data:{tracker_id:tracker_id,variable:b,value:c},async:false}).responseText;if(a.substr(0,5)=="error"){last_error=parseInt(a.substr(6,a.length-6));return"false"}return"true"}function validate_set_variable(b,e){var d=new RegExp("cmi.objectives.[0-9]*.id");if(b.match(d)){var a=get_existing_value(b);if(a.length!=0&&a!=e){last_error=351;return false}else{return true}}if(b=="cmi.completion_status"){var c=["incomplete","completed","not attempted","unknown"];if(!in_array(e,c)){last_error=406;return false}}return true}function get_existing_value(a){var b=jQuery.ajax({type:"POST",url:"./application/weblcms/tool/learning_path/php/ajax/scorm/get_value.php",data:{tracker_id:tracker_id,variable:a},async:false}).responseText;return b}function ChamiloCommit(a){if(a&&a!=""){last_error=201;return"false"}if(!initialized){last_error=142;last_error=301;return"false"}last_error=0;return"true"}function ChamiloGetLastError(){return last_error}function ChamiloGetErrorString(a){return""}function ChamiloGetDiagnostic(){return""}function translation(b,a){var c=$.ajax({type:"POST",url:"./common/javascript/ajax/translation.php",data:{string:b,application:a},async:false}).responseText;return c}function in_array(c,b){for(var a=0;a<b.length;a++){if(b[a]==c){return true}}return false};